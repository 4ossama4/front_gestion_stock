<page-header [title]="'Home / Demandes / Détails'"></page-header>
<nz-card [nzBodyStyle]="{ padding: '10px' }" class="mt-0" style="border-radius: 5px" [nzBordered]="true">
  <div class="row d-flex align-items-center">
    <div class="col-md-6 col-6">
      <h4 class="mb-0 title-page">Commande N° : {{demande?.id}} </h4>
      <small> <i class="fal fa-calendar-alt"> </i> {{demande?.date_demande}}</small>

    </div>
    <div class="col-md-6 col-6 d-flex justify-content-end">
      <timer class="mr-5" *ngIf="demande" [dateDeclaration]="demande?.created_at">
      </timer>
      <nz-button-group>
        <button nz-button nzType="primary" class="pr-4">Actions</button>
        <button nzType="primary" nz-button nz-dropdown [nzDropdownMenu]="menu1" nzPlacement="bottomRight">
          <i nz-icon nzType="ellipsis"></i>
        </button>
      </nz-button-group>
      <nz-dropdown-menu #menu1="nzDropdownMenu">
        <ul style="width: 250px;" nz-menu>
          <li style="color:blue" nz-menu-item>Demande Vu <i style="float: right;" class="fal fa-check pt-1"></i>
          </li>
          <li style="color:#111d5e" nz-menu-item>Demande En cours <i style="float: right;"
              class="fal fa-tasks pt-1"></i>
          </li>
          <li style="color:green" nz-menu-item>Demande Livré <i style="float: right;"
              class="fal fa-shipping-fast pt-1"></i>
          </li>
          <li style="color:magenta" nz-menu-item>Demande réfuser <i style="float: right;" class="fal fa-times pt-1"></i>
          </li>
          <li nz-menu-divider></li>
          <li style="color: red;" nz-menu-item>Supprimer demande <i style="float: right;" class="fal fa-trash-alt"></i>
          </li>
        </ul>
      </nz-dropdown-menu>
    </div>
  </div>
</nz-card>
<div class="row">
  <div class="col-md-3">
    <nz-card [nzBodyStyle]="{ padding: '10px' }" class="mt-0" style="border-radius: 5px" [nzBordered]="true">
      <div class="row pt-3 pb-3">
        <div class="col-md-12 text-center">
          <nz-avatar [nzSize]="64" nzIcon="user"></nz-avatar>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">
          <span style="font-weight: 600;">
            {{demande?.client?.name}}
          </span>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <hr>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <label><i class="fal fa-phone mr-2"></i>Tél :</label>
          <span>
            {{demande?.client?.telephone}}
          </span>
        </div>
        <div class="col-md-12">
          <label><i class="fal fa-map-marker-alt mr-2"></i> Adresse :</label>
          <span>
            {{demande?.client?.addresse}}
          </span>
        </div>
      </div>
    </nz-card>
  </div>
  <div class="col-md-9">
    <nz-card [nzBodyStyle]="{ padding: '10px' }" class="mt-0" style="border-radius: 5px" [nzBordered]="true">
      <div class="row">
        <div class="col-md-6 col-6">
          <span class="price-total">Prix total : {{ demande?.montant| priceFormat}} DH</span>
        </div>
        <div class="col-md-6 col-6 text-right">
          <nz-tag [nzColor]="demande?.etat?.color"> {{ demande?.etat?.label }}</nz-tag>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <hr class="mt-2">
        </div>
      </div>
      <div class="row">
        <div *ngFor="let ligne of demande?.lignes_demande" class="col-md-4">
          <div class="div-ligne-demande">
            <div>
              <span>Article</span>
            </div>
            <div>
              <span class="name-article">{{ligne.article?.designation | titlecase}}</span>
            </div>
            <div class="pt-2">
              <span>Réf.</span>
            </div>
            <div>
              <span style="font-weight: 600;" class="name-article">{{ligne.article?.reference }}</span>
            </div>
            <div class="pt-2">
              <span>Quantite</span>
            </div>
            <div>
              <span class="name-article">{{ligne.quantite }}</span>
            </div>
            <div class="pt-2">
              <span>Prix</span>
            </div>
            <div>
              <span class="name-article">{{ligne.prix_demande | priceFormat }} DH</span>
            </div>
            <div>
              <hr class="mb-2">
            </div>
            <div class="text-right">
              <i style="color: red;" class="fal fa-times-circle mr-2 fa-2x"></i>
              <i style="color: green;" class="fal fa-check-circle fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </nz-card>
  </div>
</div>